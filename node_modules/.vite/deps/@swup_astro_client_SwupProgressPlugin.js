import {
  e
} from "./chunk-SDS73SAO.js";
import "./chunk-EQCVQC35.js";

// node_modules/@swup/progress-plugin/dist/index.modern.js
function s() {
  return s = Object.assign ? Object.assign.bind() : function(t) {
    for (var s2 = 1; s2 < arguments.length; s2++) {
      var e3 = arguments[s2];
      for (var i2 in e3) Object.prototype.hasOwnProperty.call(e3, i2) && (t[i2] = e3[i2]);
    }
    return t;
  }, s.apply(this, arguments);
}
var e2 = class {
  constructor({ className: t, styleAttr: s2, animationDuration: e3, minValue: i2, initialValue: r, trickleValue: a } = {}) {
    this.value = 0, this.visible = false, this.hiding = false, this.className = "progress-bar", this.styleAttr = "data-progressbar-styles data-swup-theme", this.animationDuration = 300, this.minValue = 0.1, this.initialValue = 0.25, this.trickleValue = 0.03, this.trickleInterval = void 0, this.styleElement = void 0, this.progressElement = void 0, this.trickle = () => {
      const t2 = Math.random() * this.trickleValue;
      this.setValue(this.value + t2);
    }, void 0 !== t && (this.className = String(t)), void 0 !== s2 && (this.styleAttr = String(s2)), void 0 !== e3 && (this.animationDuration = Number(e3)), void 0 !== i2 && (this.minValue = Number(i2)), void 0 !== r && (this.initialValue = Number(r)), void 0 !== a && (this.trickleValue = Number(a)), this.styleElement = this.createStyleElement(), this.progressElement = this.createProgressElement();
  }
  get defaultStyles() {
    return `
		.${this.className} {
			position: fixed;
			display: block;
			top: 0;
			left: 0;
      width: 100%;
			height: 3px;
			background-color: black;
			z-index: 9999;
			transition:
				transform ${this.animationDuration}ms ease-out,
				opacity ${this.animationDuration / 2}ms ${this.animationDuration / 2}ms ease-in;
	  transform: translate3d(0, 0, 0) scaleX(var(--progress, 0));
      transform-origin: 0;
		}
	`;
  }
  show() {
    this.visible || (this.visible = true, this.installStyleElement(), this.installProgressElement(), this.startTrickling());
  }
  hide() {
    this.visible && !this.hiding && (this.hiding = true, this.fadeProgressElement(() => {
      this.uninstallProgressElement(), this.stopTrickling(), this.visible = false, this.hiding = false;
    }));
  }
  setValue(t) {
    this.value = Math.min(1, Math.max(this.minValue, t)), this.refresh();
  }
  installStyleElement() {
    document.head.prepend(this.styleElement);
  }
  installProgressElement() {
    this.progressElement.style.setProperty("--progress", String(0)), this.progressElement.style.opacity = "1", document.body.prepend(this.progressElement), this.progressElement.scrollTop = 0, this.setValue(Math.random() * this.initialValue);
  }
  fadeProgressElement(t) {
    this.progressElement.style.opacity = "0", setTimeout(t, 1.5 * this.animationDuration);
  }
  uninstallProgressElement() {
    this.progressElement.remove();
  }
  startTrickling() {
    this.trickleInterval || (this.trickleInterval = window.setInterval(this.trickle, this.animationDuration));
  }
  stopTrickling() {
    window.clearInterval(this.trickleInterval), delete this.trickleInterval;
  }
  refresh() {
    requestAnimationFrame(() => {
      this.progressElement.style.setProperty("--progress", String(this.value));
    });
  }
  createStyleElement() {
    const t = document.createElement("style");
    return this.styleAttr.split(" ").forEach((s2) => t.setAttribute(s2, "")), t.textContent = this.defaultStyles, t;
  }
  createProgressElement() {
    const t = document.createElement("div");
    return t.className = this.className, t.setAttribute("aria-hidden", "true"), t;
  }
};
var i = class extends e {
  constructor(t = {}) {
    super(), this.name = "SwupProgressPlugin", this.defaults = { className: "swup-progress-bar", delay: 300, transition: 300, minValue: 0.1, initialValue: 0.25, finishAnimation: true }, this.options = void 0, this.progressBar = void 0, this.showProgressBarTimeout = void 0, this.hideProgressBarTimeout = void 0, this.options = s({}, this.defaults, t);
    const { className: i2, minValue: r, initialValue: a, transition: n } = this.options;
    this.progressBar = new e2({ className: i2, minValue: r, initialValue: a, animationDuration: n });
  }
  mount() {
    this.on("visit:start", this.startShowingProgress), this.on("page:view", this.stopShowingProgress);
  }
  startShowingProgress() {
    this.progressBar.setValue(0), this.showProgressBarAfterDelay();
  }
  stopShowingProgress() {
    this.progressBar.setValue(1), this.options.finishAnimation ? this.finishAnimationAndHideProgressBar() : this.hideProgressBar();
  }
  showProgressBar() {
    this.cancelHideProgressBarTimeout(), this.progressBar.show();
  }
  showProgressBarAfterDelay() {
    this.cancelShowProgressBarTimeout(), this.cancelHideProgressBarTimeout(), this.showProgressBarTimeout = window.setTimeout(this.showProgressBar.bind(this), this.options.delay);
  }
  hideProgressBar() {
    this.cancelShowProgressBarTimeout(), this.progressBar.hide();
  }
  finishAnimationAndHideProgressBar() {
    this.cancelShowProgressBarTimeout(), this.hideProgressBarTimeout = window.setTimeout(this.hideProgressBar.bind(this), this.options.transition);
  }
  cancelShowProgressBarTimeout() {
    window.clearTimeout(this.showProgressBarTimeout), delete this.showProgressBarTimeout;
  }
  cancelHideProgressBarTimeout() {
    window.clearTimeout(this.hideProgressBarTimeout), delete this.hideProgressBarTimeout;
  }
};
export {
  i as default
};
//# sourceMappingURL=@swup_astro_client_SwupProgressPlugin.js.map
